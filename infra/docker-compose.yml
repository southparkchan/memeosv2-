version: "3.8"
services:
  server:
    build:
      context: .
      dockerfile: server/Dockerfile
    ports: ["8080:8080"]
    environment:
      - PROOF_SERVICE_URL=http://proof-service:3000/prove
      - SOLANA_RPC=https://api.mainnet-beta.solana.com
    depends_on:
      - proof-service

  proof-service:
    build:
      context: proof-service
      dockerfile: Dockerfile # or use node:18 image & copy index.js
    ports: ["3000:3000"]
